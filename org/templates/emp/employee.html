{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load sortable_column %}
{% block content %}



<div class="container">
    <div class="section-heading">
        <h2>{{employee.employee_name}}</h2>
        <br>
        <span>
            <table class="table table-borderless">
                <tr>
                    <td>{% if add_employee_access %}<a href="/org/employee_edit/{{employee.pk}}">Edit Employee Data</a><br>{% endif %}</td>
                    <td>{% if add_employee_access %}<a href="/org/reset_password/{{employee.pk}}">Reset Login Password</a><br>{% endif %}</td>
                    <td>{% if all_access %}<a href="/org/user_access/{{employee.pk}}">Edit Application Access</a><br>{% endif %}</td>
                </tr>
            </table>
        </span>

    </div>
</div>
<br>
<div class="container">
    <table class="table table-borderless">
        <tr><td>Employee ID</td><td>{{employee.employee_id}}</td></tr>
        <tr><td>First Name</td><td>{{employee.first_name}}</td></tr>
        <tr><td>Middle Name</td><td>{{employee.middle_name}}</td></tr>
        <tr><td>Last Name</td><td>{{employee.last_name}}</td></tr>
        <tr><td>Primary Manager</td><td><a href="/org/employee/{{employee.primary_manager_id}}">{{employee.primary_manager.employee_name}}</a></td></tr>
        <tr><td>Primary Function</td><td><a href="/org/function/{{employee.primary_function_id}}">{{employee.primary_function.name}}</a></td></tr>
        <tr><td>Functional Manager</td><td>{{employee.functional_manager}}</td></tr>
        <tr><td>Shift Time</td><td>{{employee.work_shift_start}} to {{shift_end}}</td></tr>
        <tr><td>Designation</td><td>{{employee.designation}}</td></tr>
        <tr><td>Grade</td><td>{{employee.grade}}</td></tr>
        <tr><td>Mobile Number</td><td>{{employee.mobile_number}}</td></tr>
        <tr><td>Office Number</td><td>{{employee.office_number}}</td></tr>
        <tr><td>Email</td><td>{{employee.email}}</td></tr>
        <tr><td>Employment Type</td><td>{{employee.employment_type}}</td></tr>
        <tr><td>Date of Joining</td><td>{{employee.date_of_joining}}</td></tr>
        <tr><td>Employment Status</td><td>{{employee.employment_status}}</td></tr>
        {% if employee.employment_status != 'A' %}
        <tr><td>Date of Resignation</td><td>{{employee.date_of_resignation}}</td></tr>
        <tr><td>Date of Separation</td><td>{{employee.date_of_separation}}</td></tr>
        {% if add_employee_access %}
        <tr><td>Personal Email</td><td>{{employee.personal_email}}</td></tr>
        {% endif %}
        {% endif %}
    </table>
    {% if projects %}
    <h4>Projects:</h4>
    <table class="table table-borderless">
        <tr><th>Project</th><th>Role</th><th>Skill</th><th>Bandwidth</th></tr>
        {% for project in projects %}
        <tr>
            <td><a href="/org/project/{{project.project.pk}}">{{project.project.name}}</a></td>
            <td>{{project.role.role}}</td>
            <td>{{project.skill.name}}</td>
            <td>{% widthratio project.bandwidth 1.0 100 %}%</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
    {% if reportees %}
    <h4>Direct Reports:</h4>
    <table class="table table-borderless">
        <tr><th>Employee ID</th><th>Member</th><th>Designation</th></tr>
        {% for member in reportees %}
        <tr>
            <td><a href="/org/employee/{{member.id}}">{{member.employee_id}}</a></td>
            <td>{{member.employee_name}}</td>
            <td>{{member.designation}}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
    {% if skills %}
    <h4>Skills:</h4>
    <table class="table table-borderless">
        <tr><th>Skill</th><th>Proficiency</th><th>Interested</th></tr>
        {% for skill in skills %}
        <tr>
            <td><a href="/org/skill_employee/{{skill.skill.id}}">{{skill.skill.name}}</a></td>
            <td>{{skill.proficiency}}</td>
            <td>{% if skill.interested %}&#10004;{% endif %}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
</div>

{% endblock content %}