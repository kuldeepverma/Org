{% extends "base.html" %}
{% load crispy_forms_tags %}
{% load sortable_column %}
{% block content %}
{% load static %}
{% load socialaccount %}
{% providers_media_js %}


<div class="container">
    <div class="section-heading">
        <h2>Employee List</h2>
        <br>
        <span>
            {% if add_employee_access %}
            <table class="table table-borderless">
                <tbody>
                    <tr>
                        <td><a href="/org/employee_new">Add Employee</a></td>
                        <td><a href="/org/resigned_employee">Resigned Employee List</a><br></td>
                        <td><a href="/org/ex_employee">Ex-Employee List</a><br></td>
                        <td><a href="/org/head_count_report">Headcount Report</a><br></td>
                    </tr>
                </tbody>
            </table>
            {% endif %}
        </span>
    </div>
</div>
<br>
<div class="container">
    <span>
        <form action="{% url 'employee' %}" method="get">
            <input name="q" type="text" placeholder="Search...">
        </form>
    </span>
    <table class="table table-borderless">
        <thead class="border-bottom font-weight-bold">
            <tr class="table-striped">
                {% sortable_column request=request property="employee_id" title="Employee ID" %}
                {% sortable_column request=request property="employee_name" title="Name" %}
                {% sortable_column request=request property="designation" title="Designation" %}
                {% sortable_column request=request property="work_shift_start" title="Shift Start Time" %}
                {% sortable_column request=request property="manager_name" title="Manager Name" %}
                {% sortable_column request=request property="functional_manager" title="Functional Manager" %}
                {% sortable_column request=request property="function_name" title="Function" %}

            </tr>
        </thead>
        <tbody>
            {% for employee in employee_list %}
            <tr>
                <td><a href="/org/employee/{{employee.id}}">{{employee.employee_id}}</a></td>
                <td>{{employee.employee_name}}</td>
                <td>{{employee.designation}}</td>
                <td>{{employee.work_shift_start}}</td>
                <td><a href="/org/employee/{{employee.primary_manager_id}}">{{employee.primary_manager.employee_name}}</a></td>
                <td>{{employee.functional_manager}}</td>
                <td><a href="/org/function/{{employee.primary_function_id}}">{{employee.primary_function.name}}</a></td>
            <tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock content %}